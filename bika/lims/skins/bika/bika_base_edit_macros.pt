<!-- Custom body macro (replaces default body macro in bika_base_edit.pt)
     print labels/widgets/descriptions in a table layout
-->

<html xmlns="http://www.w3.org/1999/xhtml"
      xml:lang="en"
      lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="plone">
  <head><title></title></head>
  <body>

    <div metal:define-macro="body">
          <metal:block define-slot="widgets">
            <tal:tabbed tal:condition="allow_tabbing | nothing">
              <tal:fieldsets define="sole_fieldset python:len(fieldsets)==1"
                repeat="fieldset fieldsets">
                <fieldset tal:define="fieldsetid python:view.normalizeString(fieldset)"
                          tal:attributes="id string:fieldset-${fieldsetid}"
                          tal:omit-tag="sole_fieldset">
                  <legend id=""
                          tal:content="python: view.getTranslatedSchemaLabel(fieldset)"
                          tal:attributes="id string:fieldsetlegend-${fieldsetid}"
                          tal:condition="not:sole_fieldset"
                          i18n:translate=""></legend>
                  <tal:fields repeat="field python:schematas[fieldset].editableFields(here, visible_only=True)">
                  <!-- XXX here -->
                    <metal:fieldMacro use-macro="python:context.widget(field.getName(), mode='edit')" />
                  </tal:fields>
                </fieldset>
              </tal:fieldsets>
            </tal:tabbed>
            <tal:nottabbed tal:condition="not: allow_tabbing | nothing">
                <tal:fields repeat="field python:schematas[fieldset].editableFields(here, visible_only=True)">
                  <!-- XXX and here -->
                  <metal:fieldMacro use-macro="python:context.widget(field.getName(), mode='edit')" />
                </tal:fields>
            </tal:nottabbed>
          </metal:block>
    </div>

  </body>


</html>
