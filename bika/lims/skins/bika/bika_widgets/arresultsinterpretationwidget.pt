<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="bika">
<head><title></title></head>
<body>

<metal:view_macro define-macro="view">
    <tal:department repeat="dept python:widget.getDepartments()">
        <div>
            <h3 tal:content="python:department.Title()"></h3>
            <!--span tal:content="structure python:widget.getResultsInterpretation(dept)"/-->
        </div>
    </tal:department>
</metal:view_macro>

<metal:edit_macro define-macro="edit">
<metal:use use-macro="field_macro | context/widgets/field/macros/edit">
<metal:body_macro fill-slot="widget_body">
    <div class='arresultsinterpretation-container'
         tal:define="departments python:context.getDepartments()">
        <!-- Tabs for departments -->
        <ul>
            <li>
                <a class="department-tab" href='#'
                   data-uid="general"
                   i18n:translate="">General</a>
            </li>
            <tal:depts repeat="dep departments">
            <li>
                <a class="department-tab" href='#'
                   tal:attributes="data-uid python:dep.UID();"
                   tal:content="dep/Title"></a>
            </li>
            </tal:depts>
        </ul>
        <!-- TextAreas (RichText) for results interpretation -->
        <div class="department-area" id="general">
            <textarea id="ResultsInterpretation:general"></textarea>
        </div>
        <tal:department repeat="dept departments">
        <div class="department-area" tal:attributes="id dept/UID">
            <textarea tal:attributes="id python:'ResultsInterpretation:%s' % dept.UID()"></textarea>
        </div>
        </tal:department>
    </div>
</metal:body_macro>
</metal:use>
</metal:edit_macro>
</html>
