<html xmlns="http://www.w3.org/1999/xhtml"
	xml:lang="en" lang="en"
	xmlns:tal="http://xml.zope.org/namespaces/tal"
	xmlns:metal="http://xml.zope.org/namespaces/metal"
	xmlns:i18n="http://xml.zope.org/namespaces/i18n"
	metal:use-macro="here/main_template/macros/master"
	i18n:domain="bika">
<body>

<metal:content-title fill-slot="content-title">
	<h1>
        <img tal:condition="view/icon | nothing"
            src="" tal:attributes="src view/icon"/>
        <span class="documentFirstHeading" tal:content="view/title"/>
    </h1>
</metal:content-title>

<metal:content-description fill-slot="content-description">
	<div class="documentDescription"
		tal:content="view/description"
		tal:condition="view/description"/>
</metal:content-description>

<metal:content-core fill-slot="content-core">
	<fieldset tal:define="portal context/@@plone_portal_state/portal;">

		<tal:comment replace="nothing">
		The position dropdown's value is not part of the bika_listing form.
		The value is inserted into form values by worksheet.js
		</tal:comment>
		<div style="margin-bottom:1em">
			<span tal:content="string:Insert into worksheet at position: " i18n:translate=""/>
			<select id="position">
				<tal:options repeat="position view/getAvailablePositions">
					<option tal:attributes="value position" tal:content="position"/>
				</tal:options>
				<option value="new" tal:content="string:New" i18n:translate=""/>
			</select>
		</div>
		<span id="worksheet_add_duplicate_ars" tal:content="structure view/ARs/contents_table"/>

	</fieldset>

	<div id="RemarksContainer" style="display:none">
		<tal:remarks
			tal:condition="python: hasattr(view.context, 'setRemarks')"
			tal:define="errors python:hasattr(request, 'errors') and request['errors'] or {}">
			<metal:fieldMacro use-macro="python:view.context.widget('Remarks', mode='edit')" />
		</tal:remarks>
		<input
			class="context workflow_action_button allowMultiSubmit saveRemarks"
			type="submit"
			value="Save remarks"
			i18n:attributes="value"/>
		<span tal:define="
			remarks python:context.getRemarks();
			rows python:len(remarks.splitlines());
			rows python:rows > 5 and rows or 5;">
			<fieldset>
				<legend i18n:translate="">
					<span i18n:translate="">Remarks</span>
					<span i18n:translate="" i18n:domain="plone">History</span>
				</legend>
				<textarea id="RemarksHistory" cols="40" readonly="readonly"
					tal:attributes="rows rows"
					tal:content="remarks"/>
			</fieldset>
		</span>
	</div>

</metal:content-core>

</body>
</html>
