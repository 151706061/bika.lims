<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<metal:block use-macro="context/global_defines/macros/defines" />

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      tal:attributes="lang default_language|default;
                      xml:lang default_language|default;"
      i18n:domain="bika"
      tal:define="portal_state context/@@plone_portal_state;
                  portal_url portal_state/portal_url;
                  plone_view context/@@plone;
                  portal portal_state/portal;">
<head>
    <div tal:replace="structure provider:plone.resourceregistries.scripts" />
    <!-- Generic style -->
    <style type="text/css">
        body {
            background-color: #efefef;
            margin: 0;
            padding: 0;
        }
        #stickers-wrapper {
            margin-top: 5mm;
        }
        .sticker {
            margin:0 auto;
            background-color:#fff;
            border-bottom: 1px dotted #cdcdcd;
            box-shadow: 1px 2px 5px #cdcdcd;
        }

        @media print {
            .noprint {display:none !important;}
            body {background-color:#fff;}
            .sticker-wrapper {
              margin:0;
              border:none;
              box-shadow:none;
              border-bottom:none;
            }
        }
        .sticker-wrapper.qr {
            height: 21mm;
            padding: 8mm 0 0;
            text-align: center;
            width: 14mm;
        }
        .sticker-wrapper.qr div.requestid {
            padding-top: 2mm;
            line-height: 4mm;
        }
        .sticker-wrapper.qr div.clientsampleid {
            line-height: 4mm;
        }
        .goback-top, .goback-bottom {
            margin: 20px auto;
            text-align: center;
            width: 50mm;
        }
        .goback-top > a,
        .goback-bottom > a {
          background-color: #aaa;
          border-radius: 5px;
          color: #fff;
          font-family: Helvetica,Arial;
          font-size: 9pt;
          font-weight: bold;
          padding: 4px 15px;
          text-decoration: none;
          text-shadow: 1px 1px 1px #999;
          text-transform: uppercase;
        }
        .goback-top.noprint > a:hover,
        .goback-bottom > a:hover {
            background-color: #bbb;
            text-shadow: 1px 1px 1px #aaa;
        }
    </style>
    <style type="text/css" tal:content="structure python:view.getSelectedTemplateCSS()"></style>
</head>
<body>
    <div id='sticker-preview-wrapper'>
        <!-- Header of the preview. This will never be printed.
             Container with preview options and buttons --->
        <div id="sticker-preview-header">
            <div id='options-handler'>
                <div class='options-line'>
                    <label for="template" i18n:translate="">Template</label>
                    <select id="template" name="template">
                    <tal:formats tal:repeat="tpl python:view.getAvailableTemplates()">
                          <option selected
                                  tal:attributes="value tpl/id"
                                  tal:content="tpl/title"
                                  tal:condition="tpl/selected"></option>
                          <option tal:attributes="value tpl/id"
                                  tal:content="tpl/title"
                                  tal:condition="not:tpl/selected"></option>
                    </tal:formats>
                    </select>
                </div>
            </div>
            <div id='sticker-buttons'>
                <input type="button" id='cancel-button' value="Go back"/>&nbsp;&nbsp;
                <input type="button" id='print-button' value="Print"/>
            </div>
        </div>

        <!-- Container where all the stickers are embedded. -->
        <div id="stickers-wrapper">
            <tal:sticker tal:repeat="sticker view/items">
            <div class='sticker'
                 tal:content='structure python:view.renderItem()'></div>
            </tal:sticker>
        </div>
    </div>
</body>
</html>
