<html xmlns="http://www.w3.org/1999/xhtml"
	xml:lang="en" lang="en"
	xmlns:tal="http://xml.zope.org/namespaces/tal"
	xmlns:metal="http://xml.zope.org/namespaces/metal"
	xmlns:i18n="http://xml.zope.org/namespaces/i18n"
	metal:use-macro="here/main_template/macros/master"
	i18n:domain="bika">
<body>

<metal:content-title fill-slot="content-title">
	<h1>
        <img tal:condition="view/icon | nothing"
            src="" tal:attributes="src view/icon"/>
        <span class="documentFirstHeading" tal:content="view/title"/>
    </h1>

</metal:content-title>

<metal:content-description fill-slot="content-description">
	<div class="documentDescription"
		tal:content="view/description"
		tal:condition="view/description"/>
</metal:content-description>

<metal:content-core fill-slot="content-core">

	<form name="SearchForm" method="POST">
	<tal:analyst
		tal:condition="nocall: view/getAnalysts|nothing">
		<span class="formQuestion">Analyst: </span>
		<select
			id = "analyst"
			name="Analyst">
			<option value="" i18n:translate="None"
				tal:attributes="selected python:context.getAnalyst() and '' or 'selected'">None</option>
			<tal:repeat repeat="analyst view/getAnalysts">
				<option
					tal:attributes="
						value python:analyst[0];
						selected python:analyst[0] == (context.getAnalyst() and context.getAnalyst() or '') and 'selected' or ''"
					tal:content="python:analyst[1]"></option>
			</tal:repeat>
		</select> <span id="analyst_changed" style="display:none" i18n:translate="">Analyst changed.</span>
		<br/>
	</tal:analyst>
	<fieldset name="criteria">
		<label for="getCategoryUID" i18n:translate="Category">Category</label>
		<select id="CategorySelector" name="getCategoryUID">
			<option value="any" i18n:translate="Any">Any</option>
			<tal:options repeat="category view/getCategories">
				<option
					tal:attributes="
						value python:category[0];
						selected python: view.request.form.get('getCategoryUID', '') == category[0] and 'selected' or ''"
					tal:content="python:category[1]"/>
			</tal:options>
		</select>

		<label for="getServiceUID" i18n:translate="Service">Service</label>
		<select id="ServiceSelector" name="getServiceUID">
			<option value="any" i18n:translate="Any">Any</option>
		</select>

		<label for="getClientUID" i18n:translate="Client">Client</label>
		<select id="ClientSelector" name="getClientUID">
			<option value="any" i18n:translate="Any">Any</option>
			<tal:options repeat="client view/getClients">
				<option
					tal:attributes="
						value python:client[0];
						selected python: view.request.get('getClientUID', '') == client[0] and 'selected' or ''"
					tal:content="python:client[1]"/>
			</tal:options>
		</select>

		<br/>

		<label for="getARProfile" i18n:translate="OR select a profile">
			Or select a template:
		</label>

		<select id="ProfileSelector" name="getARProfile">
			<option value=""></option>
			<tal:profile repeat="profile view/getARProfiles">
				<option
					tal:attributes="
						value python:profile[0];
						selected python: view.request.get('getARProfile', '') == profile[0] and 'selected' or ''"
					tal:content="python:profile[1]"/>
			</tal:profile>
		</select>

		<input type="submit" value="Search" i18n:attributes="value"/>

	</fieldset>
	<input type="hidden" name="submitted" value="1"/>
	<input tal:replace="structure context/@@authenticator/authenticator"/>
	</form>

	<form name="folderContentsForm"
	      id="folderContentsForm"
		  method="POST"
		  class="kssattr-serveraction-foldercontents_update_table">
		<div id="folderlisting-main-table">
			<div tal:replace="structure view/Analyses/contents_table"></div>
		</div>
		<input type="hidden" name="submitted" value="1"/>
		<input tal:replace="structure context/@@authenticator/authenticator"/>
	</form>

</metal:content-core>

	</body>
</html>
