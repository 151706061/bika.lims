<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xml:lang="en" lang="en"
      i18n:domain="plone"
      metal:use-macro="here/main_template/macros/master">

  <head>
    <metal:block fill-slot="top_slot">
      <tal:insert tal:replace="nothing"
           tal:define="dummy python:request.set('enable_border', view.enable_border)" />
    </metal:block>
  </head>

  <body>
    <metal:content-title fill-slot="content-title">
      <h1 class="documentFirstHeading"> 
        <tal:block condition="exists:here/aq_explicit/widget">
          <metal:field use-macro="python:here.widget('title', mode='view')">Title</metal:field>
        </tal:block>
        <tal:block condition="not:exists:here/aq_explicit/widget">
          <span tal:content="view/title" tal:omit-tag="">Directory Id</span>
        </tal:block>
      </h1>
    </metal:content-title>

    <metal:content-description fill-slot="content-description">
      <div class="documentDescription" tal:condition="exists:here/aq_explicit/widget">
        <metal:field use-macro="python:here.widget('description', mode='view')">Description</metal:field>
      </div>
      <tal:block condition="not:exists:here/aq_explicit/widget">
        <div class="documentDescription" 
             tal:content="view/description" 
             tal:condition="view/description">Description</div>
      </tal:block>
    </metal:content-description>

    <metal:content-core fill-slot="content-core">

      <tal:comment replace="nothing"> 
      <!-- XXX Yes this is one form per add button and yes this is gross.
             folder_factories:method doesn't work the way it did in 2.5 apparently, 
             or I can't figure it out. -->
      </tal:comment>
      <tal:add_buttons repeat="add_type view/content_add_buttons">
          <form 
            name="folderContentsForm"
            method="post"
            action="folder_object"
            tal:attributes="action string:${context/absolute_url}/createObject?type_name=${add_type}">
            <input 
              class="standalone add"
              type="submit"
              name=""
              i18n:attributes="value"
              tal:attributes="value string:Add ${add_type};
			                  name string:add_${add_type}"/>
          </form>
      </tal:add_buttons>


      <form 
        name="folderContentsForm"
        method="post"
        action="folder_object"
        tal:attributes="action context/absolute_url"
        class="kssattr-serveraction-foldercontents_update_table">

        <tal:wflist condition="python: len(view.wflist_states)>1">
          <span i18n:translate="label_wfstates" tal:omit-tag="">States:<span tal:omit-tag="" tal:content="structure view/wflist"/></span>
        </tal:wflist>

        <div class="visualClear" id="clear-space-before-navigation"><!-- --></div>

        <div tal:replace="structure view/contents_table"></div>
        <input tal:replace="structure context/@@authenticator/authenticator" />

      </form>

    </metal:content-core>

  </body>
</html>




