<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<metal:block use-macro="here/global_defines/macros/defines" />

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      tal:attributes="lang default_language|default;
                      xml:lang default_language|default;"
      i18n:domain="bika">

<head metal:use-macro="here/header/macros/html_header">

<metal:fillbase fill-slot="base">
    <base href="" tal:attributes="href here/renderBase" />
</metal:fillbase>

<metal:headslot fill-slot="head_slot"
                tal:define="language here/Language;
                            lang language | default_language;
                            charset site_properties/default_charset|string:utf-8">

    <metal:cache use-macro="here/global_cache_settings/macros/cacheheaders">
    Get the global cache headers located in global_cache_settings.
    </metal:cache>

<style>
table {
    border-collapse:collapse;
    margin: 1px 0em 1px 0em;
}
tr {
    page-break-inside: avoid;
}
th {
    border: 1px solid Black;
    padding: 2px 1em 2px 1em;
    text-align: left;
}
td {
    border: 1px solid Black;
    padding: 2px 1em 2px 1em;
}
th.low {
    vertical-align: bottom;
}
td.low {
    vertical-align: bottom;
}
hr.narrow {
    margin: 2px 0em 2px 0em;
    height: 1px;
    color: Black;
    background-color: Black;
}
</style>

</metal:headslot>

</head>

<body onload="this.print()">
<div class="visualNoPrint">
<a tal:attributes="href string:${portal_url}/standardsamples">
<span i18n:translate="label_return_to_standardsamples"
    >Return to standard samples</span></a>
<hr/>
</div>

<img src="" tal:attributes="src string:${portal_url}/logo.png"/>

<metal:block define-macro="standardsamples">

<h1 i18n:translate="heading_standard_samples">Standard samples</h1>

<table cellpadding="0" cellspacing="0">
<thead>
<tr>
  <th i18n:translate="label_title">Title</th>
  <th i18n:translate="label_stock">Stock</th>
  <th class="low">
    <span i18n:translate="label_standardsupplier">Supplier</span>&nbsp;
    <hr class="narrow" />
    <span i18n:translate="table_datesampled">Date&nbsp;sampled</span>&nbsp;
  </th>
  <th class="low">
    <span i18n:translate="label_manufacturer">Manufacturer</span>&nbsp;
    <hr class="narrow" />
    <span i18n:translate="table_datereceived">Date&nbsp;received</span>&nbsp;
  </th>
  <th class="low">
    <span i18n:translate="label_cataloguenumber">Catalogue number</span>&nbsp;
    <hr class="narrow" />
    <span i18n:translate="table_dateopened">Date&nbsp;opened</span>&nbsp;
  </th>
  <th class="low">
    <span i18n:translate="lable_lotnumber">Lot number</span>&nbsp;
    <hr class="narrow" />
    <span i18n:translate="table_expirydate">Expiry&nbsp;date</span>&nbsp;
  </th>
</tr>
</thead>

<tbody>

<tal:block
     define="results python:[p.getObject() for p in here.portal_catalog(
                     portal_type='StandardSample')];
             sort_on python:(('StandardDescription', 'nocase', 'asc'),);
             results python:sequence.sort(results, sort_on)"
     repeat="item results">

<tr>
  <td tal:content="item/getStandardDescription">Sugar</td>
  <td>
    <span tal:define="standardstock item/getStandardStock"
          tal:content="standardstock/Title|nothing">StandardStock
    </span>&nbsp;
  </td>
  <td class="low" tal:define="date_sampled item/getDateSampled">
    <span tal:define="supplier python:item.aq_parent"
          tal:content="supplier/Title">Supplier
    </span>&nbsp;
    <hr class="narrow" />
    <span tal:condition="date_sampled"
          tal:content="python:context.toLocalizedTime(date_sampled, long_format=0)">
      2005-01-01 10:00
    </span>&nbsp;
  </td>
  <td class="low" tal:define="date_received item/getDateReceived">
    <span tal:define="standardmanufacturer item/getStandardManufacturer"
          tal:content="standardmanufacturer/Title|nothing">Manufacturer
    </span>&nbsp;
    <hr class="narrow" />
    <span tal:condition="date_received"
          tal:content="python:context.toLocalizedTime(date_received, long_format=0)">
      2005-01-01 10:00
    </span>&nbsp;
  </td>
  <td class="low" tal:define="date_opened item/getDateOpened">
    <span tal:content="item/getCatalogueNumber">Cat 42</span>&nbsp;
    <hr class="narrow" />
    <span tal:condition="date_opened"
           tal:content="python:context.toLocalizedTime(date_opened, long_format=0)">
      2005-01-01 10:00
    </span>&nbsp;
  </td>
  <td class="low" tal:define="expiry_date item/getExpiryDate">
    <span tal:content="item/getLotNumber">Lot 27</span>&nbsp;
    <hr class="narrow" />
    <span tal:condition="expiry_date"
          tal:content="python:context.toLocalizedTime(expiry_date, long_format=0)">
      2005-01-01 10:00
    </span>&nbsp;
  </td>
</tr>
 

</tal:block>

</tbody>
</table>

</metal:block>

</body>
</html>

