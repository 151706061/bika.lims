<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="bika">

<head><title></title></head>

<body>
<div metal:fill-slot="main">

<div metal:use-macro="here/document_actions/macros/document_actions">
    Document actions (print, sendto etc)
</div>

<h1>
    <img src="attachment.png" tal:attributes="src python:here.portal_types.getTypeInfo('Attachment').getIcon()"/>
    <span i18n:translate="label_attachment_on">Attachment on</span>
    <a href=""  
        tal:define="ar python:here.getRequest()"
        tal:attributes="href ar/absolute_url"
        tal:content="here/getTextTitle">AR-01</a>
</h1>

<br/>
<div tal:define="attachmentfile here/getAttachmentFile">

<div class="field ArchetypesFileWidget"
     id="archetypes-fieldname-AttachmentFile">
<span></span>
<label for="Attachment">Attachment</label>

<tal:attachment tal:condition="attachmentfile">
<div class="field"
    tal:define="filename attachmentfile/filename | nothing;
                thissize attachmentfile/get_size | python:attachmentfile and len(attachmentfile) or 0;
                filesize python:test((thissize < 1024), '%sb' %(thissize), '%sKb' %(thissize / 1024));
                icon attachmentfile/getBestIcon | nothing">
<img tal:condition="icon" src=""
    tal:attributes="src string:${here/portal_url}/$icon"/>
<a href=""  title="Click to download"
    tal:attributes="href string:${here/absolute_url}/at_download/AttachmentFile"
    tal:content="python:getattr(attachmentfile, 'filename') or 'noname'"
    >Current file</a>
<span tal:content="python:here.lookupMime(attachmentfile.getContentType())">ContentType</span> &mdash;
<tal:size content="filesize">0Kb</tal:size>
</div>
</tal:attachment>
            
</div>

<br/>
<div>
<label i18n:translate="label_attachment_type">Attachment Type</label>
</div>
<div  tal:define="type here/getAttachmentType"
    tal:content="type/Title">photo </div>
<br/>
<div>
<label i18n:translate="label_attachment_keys">Keywords</label>
</div>
<div tal:content="here/getAttachmentKeys">key1 </div>
<br/>

</div>
</div>

</body>

</html>




