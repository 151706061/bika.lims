<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="bika">

  <metal:block fill-slot="top_slot">
    <metal:block tal:define="dummy python:request.RESPONSE.setHeader('Cache-Control', 'no-cache, no-store, must-revalidate, post-check=0, pre-check=0');
                             dummy python:request.set('enable_border', 1);" />
  </metal:block>

  <body>

    <div metal:fill-slot="main"
         tal:define="results python:[p for p in here.objectValues('MethodLogEntry')];
             sort_on python:(('ChangeDate', 'cmp', 'desc'),);
             results python:sequence.sort(results, sort_on)">

      <h1 i18n:translate="heading_update_log">Update log</h1>

      <div>

        <table class="listing nosort">
          <tr>
            <th i18n:translate="listingheader_date_and_time">Date&nbsp;and&nbsp;Time</th>
            <th i18n:translate="listingheader_performed_by">Performed&nbsp;by</th>
          </tr>
          <metal:block tal:repeat="item results">
            <tr tal:define="global odd repeat/item/odd" 
                tal:attributes="class python:test(odd, 'even', 'odd')">
              <td>
                <span
                   tal:define="change_date item/ChangeDate"
                   tal:replace="python: plone_view.toLocalizedTime(change_date, long_format=1)">
                  a date
                </span>
              </td>
              <td>
                <span tal:content="item/UserName">
                  Bob
                </span>
              </td>
            </tr>
          </metal:block>
        </table>

      </div>

    </div>

  </body>
</html>

