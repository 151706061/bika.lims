<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="bika">
  <head><title></title></head>
  <body>

<metal:view_macro define-macro="view">

<style type="text/css">
.listing td.amount {text-align: right}
.listing tfoot th {text-align: right; text-transform: None}
</style>

<table class="listing">
<tr>
<th>Name</th> <th>Result</th> <th>Unit</th> <th>Price</th>
</tr>

<tr tal:repeat="analysis accessor">
<td tal:content="python:analysis.getService().Title()">Alcohol</td>
<td tal:content="python:analysis.getResult()">10</td>
<td tal:content="python:analysis.getService().getUnit()">% Vol</td>
<td tal:content="analysis/getPrice" class="amount">R13.50</td>
</tr>

<tfoot>
<tr>
<th colspan="3">Subtotal</th>
<th tal:content="here/getSubtotal">R10.00</th>
</tr>
<tr>
<th colspan="3">VAT</th>
<th tal:content="here/getVAT">R1.40</th>
</tr>
<tr>
<th colspan="3">Total</th>
<th tal:content="here/getTotalPrice">R11.40</th>
</tr>
</tfoot>

</table>

</metal:view_macro>

<metal:define define-macro="edit">
<metal:use use-macro="field_macro | here/widgets/field/macros/edit">

<div metal:fill-slot="widget_body"
    tal:define="fieldName python:fieldName+':list'">

<table class="analysisrequest" cellspacing="0">
<thead><th colspan="3"></th></thead>
<tbody>

<tal:service repeat="item field/Services">
<tr>
<th><span tal:replace="item/Title">Alcohol</span> <em>(R<span tal:replace="item/getTotalPrice">10.00</span>)</em></th>

<td tal:content="item/getUnit">liter</td>

<td align="center" class="listingCheckbox">
<input
    type="checkbox"
    id="analysisservice.1"
    name="services:list:ignore_empty"
    tal:define="service_id string:services.${item/getId}"
    tal:attributes="
        id service_id;
        name fieldName;
        value item/UID;
        price item/getTotalPrice;
        checked python:field.widget.Checked(item, value);
        onclick string:selectService('${service_id}', 'TotalPrice')"/>
</td>
</tr>
</tal:service>
</tbody>

<tfoot>
<tr>
<th><b>Total</b></th>
<td colspan="2"> R
<input class="amount" size="5" value="0.00"
    id="TotalPrice" 
    tal:attributes="value here/getTotalPrice"
    disabled="disabled"/>
</td>
</tr>
</tfoot>

</table>
</div>
</metal:use>
</metal:define>


<div metal:define-macro="search">
    <div metal:use-macro="here/widgets/string/macros/edit">
    </div>
</div>

</body>
</html>
