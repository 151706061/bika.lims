<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      i18n:domain="bika">

<head><title></title></head>

<body>

<metal:body_macro metal:define-macro="body">

<br/>
<table
    summary="Order add form"
    class="analysisrequest"
    cellpadding="0" cellspacing="0">

<thead>

<tr>
<th  i18n:translate="label_ordernumber">Order number
</th>
<td class="left" colspan="6" tal:content="here/getOrderNumber">Order 123</td>
<input type="hidden" name="OrderNumber"
    tal:attributes="value here/getOrderNumber"/>
</tr>

<tr>
<th i18n:translate="label_orderdate">Order date
</th>
<td class="left" colspan="6"
    tal:define="d here/getOrderDate"
    tal:content="python:plone_view.toLocalizedTime(d, long_format=1)"
    >2005-01-01 10:00</td>
<input type="hidden" name="OrderDate"
    tal:attributes="value here/getOrderDate"/>
</tr>

<tr>
<th i18n:translate="label_order_dispatch_date">Dispatch date
</th>
<td class="left" colspan="6"
    tal:define="dd here/getDateDispatched"
    tal:content="python:dd and plone_view.toLocalizedTime(dd, long_format=1)"
    >2005-01-01 10:00</td>
<input type="hidden" name="DateDispatched"
    tal:attributes="value here/getDateDispatched"/>
</tr>

<tr>
<th i18n:translate="label_contact_person">Contact person</th>
<td class="left" colspan="6">

<a tal:define="contact here/getContact"
   tal:condition="nocall:contact"
   tal:attributes="href contact/absolute_url"
   tal:content="contact/Title">Pete Smith</a>
</td>
</tr>

<tr tal:define="invoice here/getInvoice"
    tal:condition="nocall:invoice">
<th i18n:translate="label_invoice">Invoice</th>
<td class="left" colspan="6">

<a tal:attributes="href invoice/absolute_url"
   tal:content="invoice/InvoiceNumber">I-001</a>
</td>
</tr>

<tr>
<th i18n:translate="label_product">Product</th>
<th i18n:translate="label_description">Description</th>
<th i18n:translate="label_volume">Volume</th>
<th i18n:translate="label_unit">Unit</th>
<th i18n:translate="label_price">Price</th>
<th i18n:translate="label_quantity">Quantity</th>
<th i18n:translate="label_total">Total</th>
</tr>

</thead>

<tbody>

<tal:orderitem
    define="
        items python:here.objectValues('OrderItem');
        sort_on python:(('Title', 'nocase', 'asc'),);
        items python:sequence.sort(items, sort_on)"
    repeat="orderitem items">
<tr class="left" tal:define="labproduct python:orderitem.getProduct()">
<td class="left" tal:content="structure labproduct/Title">Bottle</td>
<td class="left" tal:content="structure labproduct/getProductDescription">Glass bottle</td>
<td class="left" tal:content="labproduct/getVolume">187 ml</td>
<td class="left" tal:content="labproduct/getUnit">187 ml</td>
<td class="amount" tal:content="labproduct/getPrice">R10</td>
<td class="amount" tal:content="orderitem/getQuantity">5.0</td>
<td class="amount" tal:content="orderitem/getTotal">50.0</td>
</tr>
</tal:orderitem>

</tbody>

<tfoot>

<tr>
<th colspan="5" i18n:translate="label_subtotal"><b>Subtotal</b></th>
<td class="amount">
<span tal:replace="here/getTotalQty">0.00</span>
</td>
<td class="amount" ><span i18n:translate="label_currency_abbreviation"> R</span>
<span tal:replace="here/getSubtotal">0.00</span>
</td>
</tr>

<tr>
<th colspan="6" i18n:translate="label_vat"><b>VAT</b></th>
<td class="amount" ><span i18n:translate="label_currency_abbreviation"> R</span>
<span tal:replace="here/getVAT">0.00</span>
</td>
</tr>

<tr>
<th colspan="6" i18n:translate="label_total"><b>Total</b></th>
<td class="amount" ><span i18n:translate="label_currency_abbreviation"> R</span>
<span tal:replace="here/getTotal">0.00</span>
</td>
</tr>

</tfoot>

</table>

</metal:body_macro>

</body>

</html>
